# 基本类型

## 浮点数的精度问题

[《老大说：谁要再用double定义商品金额，就自己收拾东西走》](https://mp.weixin.qq.com/s?__biz=MzU4ODI1MjA3NQ==&mid=2247485507&idx=1&sn=5c65f4a62ceab57a23bfe810a161035b&scene=21#wechat_redirect) 

+ 符号部分（S）

  0-正  1-负

+ 阶码部分（E）（指数部分）

  + 对于float型浮点数，指数部分8位，考虑可正可负，因此可以表示的指数范围为-127 ~ 128
  + 对于double型浮点数，指数部分11位，考虑可正可负，因此可以表示的指数范围为-1023 ~ 1024

+ 尾数部分（M）浮点数的精度是由尾数的位数来决定的

  + 对于float型浮点数，尾数部分23位，换算成十进制就是 2^23=8388608，所以十进制精度只有6 ~ 7位
  + 对于double型浮点数，尾数部分52位，换算成十进制就是 2^52 = 4503599627370496，所以十进制精度只有15 ~ 16位

精度问题如何解决

+ 用字符串或者数组解决多位数问题
+ Java的大数类是个好东西

### kotlin

```
Kotlin 提供了浮点类型 Float 与 Double 类型
```

| 类型   | 大小（比特数） | 有效数字比特数 | 指数比特数 | 十进制位数 |
| ------ | -------------- | -------------- | ---------- | ---------- |
| Float  | 32             | 24             | 8          | 6-7        |
| Double | 64             | 53             | 11         | 15-16      |

[真有小伙伴不知道浮点数如何转二进制吗？](https://mp.weixin.qq.com/s/LVpvmBO0GY6TC4gwL_12Yw)

https://www.bilibili.com/video/BV1mx411M7Ts?from=search&seid=11100260999147641608&spm_id_from=333.337.0.0

**把十进制小数`0.875`转换成二进制，具体怎么操作**

+ 以小数点为界，拆分
+ 整数部分转换 除2取余法
+ 小数部分转换 乘2取整法
+ 合并结果 该结果按照尾数 + 阶码的计算机计数方式重新表示
+ 得对应数值，不够就补0，超出则截断，截断会出行误差